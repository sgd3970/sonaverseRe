# Sonaverse 리뉴얼 – 작업 방식 소프트 룰

> **목적**: 리뉴얼 개발을 진행할 때 **일상적인 작업 흐름을 단순하게 고정**해, 품질과 속도를 동시에 유지하기 위함  
> **성격**: 강제 규칙이라기보다 “이렇게 하면 편하다” 수준의 소프트 룰

---

## 1. 브랜치 전략 (기능/페이지 단위)

- **원칙**: “한 브랜치 = 한 기능/페이지”
- 예시:
  - `feature/home-page`
  - `feature/products-manbo`
  - `feature/inquiry-form`
  - `feature/admin-press-list`
- 장점:
  - PR 범위가 작아져 리뷰·롤백이 쉬움
  - 기능별로 성능 영향 범위를 추적하기 좋음

---

## 2. PR(머지 요청) 단위

- PR 하나에는 **아래 항목 중 2개를 동시에 넣지 않는다**:
  - 대규모 UI 변경
  - 데이터 구조 변경(DB, API 스키마)
  - 공통 컴포넌트 리팩토링
- 권장 패턴:
  - “페이지 UI 구현” PR
  - “API/서비스 로직 구현” PR
  - “공통 컴포넌트/유틸 추가” PR
  - “성능 최적화” PR

> 가능하면, **시각적 변경과 데이터 모델 변경을 분리**하는 것이 좋다.

---

## 3. 작업 전 빠른 체크 (실제 개발 루프)

1. **기존 문서 확인**
   - `IMPLEMENTATION_PLAN.md`에서 페이지 우선순위 확인
   - `FOLDER_STRUCTURE_GUIDE.md`에서 위치/레이어 확인
   - `COMPONENT_MAPPING.md`에서 컴포넌트 이름 매핑 확인
   - `tools/TOOL_*.md`에서 필요한 도구 사용법 확인
2. **파일/폴더 생성 전 검색**
   - 유사 기능/컴포넌트가 이미 있는지 검색 후, 가능하면 재사용 또는 확장
3. **작업 범위 메모**
   - 이 브랜치에서 “어디까지 할지”를 짧게 기록 (예: PR 설명 초안)

---

## 4. 성능 관련 소프트 룰

- 새 페이지/기능 작업 시:
  - **이미지**:
    - `next/image` 사용 여부 확인
    - Above-the-fold만 `priority`, 나머지는 lazy
  - **데이터 페칭**:
    - 서버 컴포넌트 우선
    - 필요한 필드만 가져오기
  - **JS 번들**:
    - 무거운 라이브러리는 동적 임포트 후보로 검토
- 큰 작업 후에는 간단히:
  - `npm run build` 또는 `npm run analyze` (실제 프로젝트 구성 후)
  - Lighthouse(로컬 or CI) 점수 확인

---

## 5. 코드 리뷰 관점

- PR 리뷰 시 기본 질문:
  - “이 변경이 **성능에 어떤 영향을 줄지** 상상해봤는가?”
  - “같은 패턴이 이미 다른 feature에 있지 않은가?”
  - “디자인 시스템(색, 폰트, 간격, 컴포넌트)이 일관되게 적용되었는가?”
  - “API/DB 스키마 변경이 있다면 문서(DATABASE_SCHEMA, API_ROUTES)에 반영되었는가?”

---

## 6. 도구 사용 타이밍

- **개발 중(로컬)**:
  - 번들 분석 필요할 때만 `@next/bundle-analyzer`
  - 폼/입력 작업 시 `zod` + `react-hook-form`
  - 이미지 작업 시 `plaiceholder` 참고
- **직전·직후**:
  - 중요한 기능 추가 전후로 Lighthouse 체크 (`@lhci/cli`)
  - 에러가 자주 나는 기능은 Sentry 이벤트를 확인

---

## 7. 요약

1. **작은 브랜치, 작은 PR**  
2. **문서 → 구조 → 컴포넌트 이름 → 코드 순서로 사고**  
3. **성능과 디자인 시스템을 항상 머릿속에 두고 작업**  

이 문서는 리뉴얼 프로젝트가 진행되면서, 실제로 불편했던 점을 반영해 계속 업데이트해 나가는 것을 전제로 한다.


